{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "ApimServiceName": {
      "type": "string"
    },
    "PolicyXMLBaseUrl": {
      "type": "string"
    },
    "BackendServiceUrl": {
      "type": "string"
    },
    "OauthServerId": {
      "type": "string"
    },
    "ProductsApiName": {
      "type": "object"
    }
  },
  "variables": {},
  "resources": [
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api')]",
      "type": "Microsoft.ApiManagement/service/apis",
      "apiVersion": "2019-01-01",
      "dependsOn": [],
      "properties": {
        "displayName": "Integration Api",
        "apiRevision": "1",
        "description": "Api Documentation",
        "subscriptionRequired": true,
        "serviceUrl": "[parameters('BackendServiceUrl')]",
        "path": "integration",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": {
            "authorizationServerId": "[parameters('OauthServerId')]"
          }
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": true
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/5f4e6553d4ce8427943899a1')]",
      "type": "Microsoft.ApiManagement/service/apis/schemas",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]"
      ],
      "properties": {
        "contentType": "application/vnd.ms-azure-apim.swagger.definitions+json",
        "document": {
          "value": "{\"AccountBalanceResponse\":{\"type\":\"object\",\"properties\":{\"action\":{\"type\":\"boolean\"},\"caseDetail\":{\"$ref\":\"#/definitions/CaseDetailResponse\"},\"financialAccount\":{\"type\":\"string\"},\"history\":{\"type\":\"boolean\"},\"numberDueReceipts\":{\"type\":\"integer\",\"format\":\"int32\"},\"receiptList\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ReceiptResponse\"}},\"totalDue\":{\"type\":\"number\",\"format\":\"double\"},\"unit\":{\"type\":\"string\"}},\"title\":\"AccountBalanceResponse\"},\"AlternativeLoginGetCodeData\":{\"type\":\"object\",\"properties\":{\"BodyOut\":{\"$ref\":\"#/definitions/BodyOutGetCode\"},\"HeaderOut\":{\"$ref\":\"#/definitions/HeaderOut\"}},\"title\":\"AlternativeLoginGetCodeData\"},\"AlternativeLoginResponse\":{\"type\":\"object\",\"properties\":{\"authenticated\":{\"type\":\"string\"},\"message\":{\"type\":\"string\"},\"responseCode\":{\"type\":\"string\"},\"responseDescription\":{\"type\":\"string\"},\"sessionToken\":{\"type\":\"string\"}},\"title\":\"AlternativeLoginResponse\"},\"BalancesConsumptionDetail\":{\"type\":\"object\",\"properties\":{\"available\":{\"type\":\"string\"},\"balance\":{\"type\":\"string\"},\"category\":{\"type\":\"string\"},\"consumption\":{\"type\":\"string\"},\"destinations\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"tag\":{\"type\":\"string\"}},\"title\":\"BalancesConsumptionDetail\"},\"BalancesConsumptionResponse\":{\"type\":\"object\",\"properties\":{\"available\":{\"type\":\"string\"},\"balance\":{\"type\":\"string\"},\"consumption\":{\"type\":\"string\"},\"detail\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/BalancesConsumptionDetail\"}},\"usageData\":{\"type\":\"string\"}},\"title\":\"BalancesConsumptionResponse\"},\"BillsResponse\":{\"type\":\"object\",\"properties\":{\"billingCycle\":{\"type\":\"string\"},\"corporateAccount\":{\"type\":\"string\"},\"daysForDigitalInvoice\":{\"type\":\"integer\",\"format\":\"int64\"},\"downloadAddress\":{\"type\":\"string\"},\"emissionDate\":{\"type\":\"string\"},\"expirationDate\":{\"type\":\"string\"},\"numberReceipt\":{\"type\":\"string\"},\"receiptId\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"totalAmount\":{\"type\":\"number\",\"format\":\"double\"},\"typeReceipt\":{\"type\":\"string\"}},\"title\":\"BillsResponse\"},\"BodyOutGetCode\":{\"type\":\"object\",\"properties\":{\"responseCode\":{\"type\":\"string\"},\"responseDescription\":{\"type\":\"string\"},\"smsCode\":{\"type\":\"string\"}},\"title\":\"BodyOutGetCode\"},\"Callable«string»\":{\"type\":\"object\",\"title\":\"Callable«string»\"},\"CaseDetailResponse\":{\"type\":\"object\",\"properties\":{\"caseCode\":{\"type\":\"integer\",\"format\":\"int32\"},\"id\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}},\"title\":\"CaseDetailResponse\"},\"CodeSmsResponse\":{\"type\":\"object\",\"properties\":{\"responseDescription\":{\"type\":\"string\"},\"smsCode\":{\"type\":\"string\"}},\"title\":\"CodeSmsResponse\"},\"DataProductInventoryResponse\":{\"type\":\"object\",\"properties\":{\"benefits\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"dataQuota\":{\"type\":\"string\"},\"dataSms\":{\"type\":\"string\"},\"dataVoice\":{\"type\":\"string\"},\"hiringDate\":{\"type\":\"string\"},\"permanenceTime\":{\"type\":\"string\"},\"plan\":{\"type\":\"string\"},\"renovationDays\":{\"type\":\"integer\",\"format\":\"int32\"},\"unlimitedApp\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"title\":\"DataProductInventoryResponse\"},\"FinancialAccountLandLineResponse\":{\"type\":\"object\",\"properties\":{\"financialAccount\":{\"type\":\"string\"},\"servicesAssociated\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"title\":\"FinancialAccountLandLineResponse\"},\"Flux«AccountBalanceResponse»\":{\"type\":\"object\",\"properties\":{\"prefetch\":{\"type\":\"integer\",\"format\":\"int32\"}},\"title\":\"Flux«AccountBalanceResponse»\"},\"Flux«BalancesConsumptionResponse»\":{\"type\":\"object\",\"properties\":{\"prefetch\":{\"type\":\"integer\",\"format\":\"int32\"}},\"title\":\"Flux«BalancesConsumptionResponse»\"},\"Flux«BillsResponse»\":{\"type\":\"object\",\"properties\":{\"prefetch\":{\"type\":\"integer\",\"format\":\"int32\"}},\"title\":\"Flux«BillsResponse»\"},\"Flux«FinancialAccountLandLineResponse»\":{\"type\":\"object\",\"properties\":{\"prefetch\":{\"type\":\"integer\",\"format\":\"int32\"}},\"title\":\"Flux«FinancialAccountLandLineResponse»\"},\"GenericResponse\":{\"type\":\"object\",\"properties\":{\"messageResponse\":{\"type\":\"string\"},\"object\":{\"type\":\"boolean\"}},\"title\":\"GenericResponse\"},\"HeaderOut\":{\"type\":\"object\",\"properties\":{\"destination\":{\"type\":\"string\"},\"execId\":{\"type\":\"string\"},\"originator\":{\"type\":\"string\"},\"pid\":{\"type\":\"string\"},\"timestamp\":{\"type\":\"string\"}},\"title\":\"HeaderOut\"},\"Mono«AlternativeLoginResponse»\":{\"type\":\"object\",\"title\":\"Mono«AlternativeLoginResponse»\"},\"Mono«CodeSmsResponse»\":{\"type\":\"object\",\"title\":\"Mono«CodeSmsResponse»\"},\"Mono«DataProductInventoryResponse»\":{\"type\":\"object\",\"title\":\"Mono«DataProductInventoryResponse»\"},\"Mono«GenericResponse»\":{\"type\":\"object\",\"title\":\"Mono«GenericResponse»\"},\"Mono«SunatCompanyResponse»\":{\"type\":\"object\",\"title\":\"Mono«SunatCompanyResponse»\"},\"Mono«TokenResponse»\":{\"type\":\"object\",\"title\":\"Mono«TokenResponse»\"},\"ReceiptResponse\":{\"type\":\"object\",\"properties\":{\"amountReceipt\":{\"type\":\"number\",\"format\":\"double\"},\"dueDate\":{\"type\":\"string\"},\"numberReceipt\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"}},\"title\":\"ReceiptResponse\"},\"SunatCompanyResponse\":{\"type\":\"object\",\"properties\":{\"codeZone\":{\"type\":\"string\"},\"department\":{\"type\":\"string\"},\"interior\":{\"type\":\"string\"},\"kilometro\":{\"type\":\"string\"},\"legalName\":{\"type\":\"string\"},\"lote\":{\"type\":\"string\"},\"manzana\":{\"type\":\"string\"},\"nameVia\":{\"type\":\"string\"},\"number\":{\"type\":\"string\"},\"statusContribuyente\":{\"type\":\"string\"},\"statusDomicilio\":{\"type\":\"string\"},\"typeVia\":{\"type\":\"string\"},\"typeZone\":{\"type\":\"string\"},\"ubigeo\":{\"type\":\"string\"}},\"title\":\"SunatCompanyResponse\"},\"TokenResponse\":{\"type\":\"object\",\"properties\":{\"generateDate\":{\"type\":\"string\"},\"token\":{\"type\":\"string\"}},\"title\":\"TokenResponse\"},\"Alternative-loginValidateNumberNumberCodeCodeGet200ApplicationJsonResponse\":{\"type\":\"object\"},\"Alternative-loginValidateNumberNumberCodeCodeGet200ApplicationStream-jsonRes\":{\"type\":\"object\"},\"Balances-consumptionNumberNumberGet200ApplicationJsonResponse\":{\"type\":\"object\"},\"IntegrationReniecPersonGet200ApplicationJsonResponse\":{\"type\":\"object\"}}"
        }
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getCodeSmsUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "alternative Login",
        "method": "GET",
        "urlTemplate": "/alternative-login/get-sms/{number}",
        "templateParameters": [
          {
            "name": "number",
            "description": "number",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Obtiene el codigo del mensaje par el llogin alternativo",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "AlternativeLoginGetCodeData"
              },
              {
                "contentType": "application/stream+json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "AlternativeLoginGetCodeData"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getCodeSmsUsingGET/alternative-login-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'getCodeSmsUsingGET')]"
      ],
      "properties": {
        "displayName": "alternative-login-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getCodeSmsUsingGET_1')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "Balance Comsumption",
        "method": "GET",
        "urlTemplate": "/balances-consumption/number/{number}",
        "templateParameters": [
          {
            "name": "number",
            "description": "number",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "obtiene la data para balances y consumos",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "Balances-consumptionNumberNumberGet200ApplicationJsonResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getCodeSmsUsingGET_1/balances-consumption-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'getCodeSmsUsingGET_1')]"
      ],
      "properties": {
        "displayName": "balances-consumption-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/validateCodeAndNumberUsingGET_2')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "Facturacion ",
        "method": "GET",
        "urlTemplate": "/retrieve-bills/filter",
        "templateParameters": [],
        "description": "Lista factuarcion por codigo",
        "request": {
          "queryParameters": [
            {
              "name": "companyCode",
              "description": "companyCode",
              "type": "string",
              "values": []
            },
            {
              "name": "endDate",
              "description": "endDate",
              "type": "string",
              "values": []
            },
            {
              "name": "page",
              "description": "Format - int32. page",
              "type": "integer",
              "defaultValue": "0",
              "values": []
            },
            {
              "name": "search",
              "description": "search",
              "type": "string",
              "values": []
            },
            {
              "name": "size",
              "description": "Format - int32. size",
              "type": "integer",
              "defaultValue": "10",
              "values": []
            },
            {
              "name": "starDate",
              "description": "starDate",
              "type": "string",
              "values": []
            },
            {
              "name": "typeService",
              "description": "typeService",
              "type": "string",
              "values": []
            }
          ],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "BillsResponse"
              },
              {
                "contentType": "application/stream+json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "BillsResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/validateCodeAndNumberUsingGET_2/retrieve-bills-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'validateCodeAndNumberUsingGET_2')]"
      ],
      "properties": {
        "displayName": "retrieve-bills-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/validateCodeAndNumberUsingGET_1')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "Financing",
        "method": "GET",
        "urlTemplate": "/financing/filter",
        "templateParameters": [],
        "description": "obtiene datos para el financiamiento de deuda",
        "request": {
          "queryParameters": [
            {
              "name": "companyCode",
              "description": "companyCode",
              "type": "string",
              "values": []
            },
            {
              "name": "page",
              "description": "Format - int32. page",
              "type": "integer",
              "defaultValue": "0",
              "values": []
            },
            {
              "name": "search",
              "description": "search",
              "type": "string",
              "values": []
            },
            {
              "name": "size",
              "description": "Format - int32. size",
              "type": "integer",
              "defaultValue": "10",
              "values": []
            },
            {
              "name": "typeService",
              "description": "typeService",
              "type": "string",
              "values": []
            }
          ],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "AccountBalanceResponse"
              },
              {
                "contentType": "application/stream+json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "AccountBalanceResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/validateCodeAndNumberUsingGET_1/financing-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'validateCodeAndNumberUsingGET_1')]"
      ],
      "properties": {
        "displayName": "financing-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/findRucSunatUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "findRucSunat",
        "method": "GET",
        "urlTemplate": "/integration/sunat/{ruc}",
        "templateParameters": [
          {
            "name": "ruc",
            "description": "ruc",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "findRucSunat",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "*/*",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "Mono«SunatCompanyResponse»"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "*/*"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "*/*"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "*/*"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/findRucSunatUsingGET/sunat-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'findRucSunatUsingGET')]"
      ],
      "properties": {
        "displayName": "sunat-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/updateFactoryGetReportUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "Get Report",
        "method": "GET",
        "urlTemplate": "/get-report/process",
        "templateParameters": [],
        "description": "Actualiza planta",
        "request": {
          "queryParameters": [
            {
              "name": "numberDocument",
              "description": "numberDocument",
              "type": "string",
              "values": []
            },
            {
              "name": "typeDocument",
              "description": "typeDocument",
              "type": "string",
              "values": []
            }
          ],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "AccountBalanceResponse"
              },
              {
                "contentType": "application/stream+json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "AccountBalanceResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/updateFactoryGetReportUsingGET/get-report-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'updateFactoryGetReportUsingGET')]"
      ],
      "properties": {
        "displayName": "get-report-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getListLineByCustomerCodeUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "getListLineByCustomerCode",
        "method": "GET",
        "urlTemplate": "/line/customer-code/{customerCode}",
        "templateParameters": [
          {
            "name": "customerCode",
            "description": "customerCode",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "obtiene datos para el financiamiento de deuda",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "FinancialAccountLandLineResponse"
              },
              {
                "contentType": "application/stream+json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "FinancialAccountLandLineResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getListLineByCustomerCodeUsingGET/line-by-customer-code-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'getListLineByCustomerCodeUsingGET')]"
      ],
      "properties": {
        "displayName": "line-by-customer-code-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/mockUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "mock",
        "method": "GET",
        "urlTemplate": "/get-report/mock",
        "templateParameters": [],
        "description": "mock",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "Callable«string»"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/mockUsingGET/get-report-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'mockUsingGET')]"
      ],
      "properties": {
        "displayName": "get-report-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getAccessTokenForRefreshTokenUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "Obtiene token ",
        "method": "GET",
        "urlTemplate": "/integration/get-access-token",
        "templateParameters": [],
        "description": "obtiene el token",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "TokenResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getAccessTokenForRefreshTokenUsingGET/auth-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'getAccessTokenForRefreshTokenUsingGET')]"
      ],
      "properties": {
        "displayName": "auth-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getProductInventoryAppUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "product inventory",
        "method": "GET",
        "urlTemplate": "/integration/product-inventory/app/publicId/{publicId}/type/{type}",
        "templateParameters": [
          {
            "name": "publicId",
            "description": "publicId",
            "type": "string",
            "required": true,
            "values": []
          },
          {
            "name": "type",
            "description": "type",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Obtiene el product inventory integrandose con los servicios de tdp, solo para app",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "*/*",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "DataProductInventoryResponse"
              },
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "DataProductInventoryResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "*/*"
              },
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "*/*"
              },
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "*/*"
              },
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getProductInventoryAppUsingGET/product-inventory-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'getProductInventoryAppUsingGET')]"
      ],
      "properties": {
        "displayName": "product-inventory-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getDataPersonReniecUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "Reniec",
        "method": "GET",
        "urlTemplate": "/integration/reniec/person?app={app}&numberDocument={numberDocument}",
        "templateParameters": [
          {
            "name": "app",
            "description": "app",
            "type": "string",
            "required": true,
            "values": []
          },
          {
            "name": "numberDocument",
            "description": "numberDocument",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Obtiene los datos de la persona",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "IntegrationReniecPersonGet200ApplicationJsonResponse"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/getDataPersonReniecUsingGET/reniec-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'getDataPersonReniecUsingGET')]"
      ],
      "properties": {
        "displayName": "reniec-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/validateCodeAndNumberUsingGET')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'integration-api', '5f4e6553d4ce8427943899a1')]"
      ],
      "properties": {
        "displayName": "valida el codigo y el numero dando acceso al login",
        "method": "GET",
        "urlTemplate": "/alternative-login/validate/number/{number}/code/{code}",
        "templateParameters": [
          {
            "name": "code",
            "description": "code",
            "type": "string",
            "required": true,
            "values": []
          },
          {
            "name": "number",
            "description": "number",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "valida el codigo y el numero dando acceso al login",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "representations": [
              {
                "contentType": "application/json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "Alternative-loginValidateNumberNumberCodeCodeGet200ApplicationJsonResponse"
              },
              {
                "contentType": "application/stream+json",
                "schemaId": "5f4e6553d4ce8427943899a1",
                "typeName": "Alternative-loginValidateNumberNumberCodeCodeGet200ApplicationStream-jsonRes"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 401,
            "description": "Unauthorized",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 403,
            "description": "Forbidden",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          },
          {
            "statusCode": 404,
            "description": "Not Found",
            "representations": [
              {
                "contentType": "application/json"
              },
              {
                "contentType": "application/stream+json"
              }
            ],
            "headers": []
          }
        ]
      },
      "resources": []
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/validateCodeAndNumberUsingGET/alternative-login-controller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'integration-api', 'validateCodeAndNumberUsingGET')]"
      ],
      "properties": {
        "displayName": "alternative-login-controller"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/integration-api/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/policies",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]"
      ],
      "properties": {
        "format": "rawxml-link",
        "value": "[concat(parameters('PolicyXMLBaseUrl'), '/integration-api-apiPolicy.xml')]"
      }
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/', parameters('ProductsApiName').wappedev, '/', 'integration-api')]",
      "type": "Microsoft.ApiManagement/service/products/apis",
      "apiVersion": "2019-01-01",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'integration-api')]"
      ],
      "properties": {}
    }
  ],
  "outputs": {}
}